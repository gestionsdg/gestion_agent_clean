{% load static %}

{% block content %}
<div style="border: 2px solid #00bfff; border-radius: 12px; padding: 20px; margin: 20px;">
  <h2 style="font-size: 35px; font-weight: bold; text-decoration: underline; text-align: center;">
    Tableau de Bord
  </h2>

  <div class="dashboard-grid">
    <!-- Carte "Total Agents" supprim√©e -->

    <a href="{% url 'personnel:liste_actifs_par_entite' %}" class="card-dashboard bg-green">
      <div class="icon">‚úÖ</div>
      <div class="label">Agents Actifs</div>
      {% with v=actifs|default:0 %}
        <div class="count" data-target="{{ v }}">{{ v }}</div>
      {% endwith %}
    </a>

    <!-- Les 6 cartes ci-dessous d√©clenchent un prompt d'ann√©e (g√©r√© par dashboard.js) -->
    <a href="{% url 'personnel:liste_retraites_pdf' %}" class="card-dashboard bg-yellow text-dark js-year-pdf">
      <div class="icon">üë¥</div>
      <div class="label">Retrait√©s</div>
      {% with v=retraites|default:0 %}
        <div class="count" data-target="{{ v }}">{{ v }}</div>
      {% endwith %}
    </a>

    <a href="{% url 'personnel:liste_decedes_pdf' %}" class="card-dashboard bg-red js-year-pdf">
      <div class="icon">‚ö∞Ô∏è</div>
      <div class="label">Agents d√©c√©d√©s</div>
      {% with v=decedes|default:0 %}
        <div class="count" data-target="{{ v }}">{{ v }}</div>
      {% endwith %}
    </a>

    <a href="{% url 'personnel:liste_licencies_pdf' %}" class="card-dashboard bg-darkgreen js-year-pdf">
      <div class="icon">‚ùå</div>
      <div class="label">Agents licenci√©s</div>
      {% with v=agents_ayant_ete_licencies|default:0 %}
        <div class="count" data-target="{{ v }}">{{ v }}</div>
      {% endwith %}
    </a>

    <a href="{% url 'personnel:liste_demissionnaires_pdf' %}" class="card-dashboard bg-teal js-year-pdf">
      <div class="icon">üì§</div>
      <div class="label">D√©missionnaires</div>
      {% with v=demissionnaires|default:0 %}
        <div class="count" data-target="{{ v }}">{{ v }}</div>
      {% endwith %}
    </a>

    <a href="{% url 'personnel:liste_detachement_pdf' %}" class="card-dashboard bg-purple js-year-pdf">
      <div class="icon">üß≥</div>
      <div class="label">Agents en d√©tachement</div>
      {% with v=en_detachement|default:0 %}
        <div class="count" data-target="{{ v }}">{{ v }}</div>
      {% endwith %}
    </a>

    <a href="{% url 'personnel:liste_disponibilite_pdf' %}" class="card-dashboard bg-indigo js-year-pdf">
      <div class="icon">üìÇ</div>
      <div class="label">Agents mis en disponibilit√©</div>
      {% with v=en_disponibilite|default:0 %}
        <div class="count" data-target="{{ v }}">{{ v }}</div>
      {% endwith %}
    </a>
  </div>

  <div style="width: 100%; text-align: center; margin-top: 25px;">
    <a href="{% url 'personnel:liste_employes' %}">
      <button class="btn btn-secondary">‚û° Acc√©der √† la liste des employ√©s</button>
    </a>
    {% url 'admin:index' as admin_index_url %}
    {% if is_admin_rh and admin_index_url %}
      <a href="{{ admin_index_url }}" style="margin-left: 10px;">
        <button class="btn btn-secondary">‚Ü©Ô∏è Retour √† l'Interface Admin</button>
      </a>
    {% endif %}
  </div>
</div>

<style>
.dashboard-grid{display:flex;flex-wrap:wrap;justify-content:center;gap:20px;margin-top:30px}
.card-dashboard{width:180px;height:150px;padding:18px;border-radius:16px;text-align:center;font-weight:bold;color:#fff;text-decoration:none;box-shadow:0 4px 6px rgba(0,0,0,.1);transition:transform .2s}
.card-dashboard:hover{transform:scale(1.05);cursor:pointer}
.card-dashboard .icon{font-size:38px;margin-bottom:5px}
.card-dashboard .label{font-size:19px;font-weight:700;margin-bottom:3px}
.card-dashboard .count{font-size:28px;font-weight:700}
.bg-blue{background:#007bff}.bg-green{background:#28a745}.bg-yellow{background:#ffc107;color:#000!important}.bg-red{background:#dc3545}.bg-darkgreen{background:#228b22}.bg-teal{background:#17a2b8}.bg-purple{background:#6610f2}.bg-indigo{background:#6f42c1}
.btn-secondary{background:#6c757d;color:#fff;border:none;padding:3px 14px;border-radius:8px;font-size:16px}
.text-dark{color:#000!important}
</style>

<!-- Un seul JS, qui g√®re l'animation + le prompt d'ann√©e -->
<script src="{% static 'js/dashboard.js' %}" defer></script>
{% endblock %}
