{% block content %}
<div style="border: 2px solid #00bfff; border-radius: 12px; padding: 20px; margin: 20px;">
  <h2 style="font-size: 35px; font-weight: bold; text-decoration: underline; text-align: center;">
    Tableau de Bord
  </h2>

  <div class="dashboard-grid">
    <!-- Carte -->
    <a href="{% url 'liste_total_agents' %}" class="card-dashboard bg-blue">
      <div class="icon">üë•</div>
      <div class="label">Total Agents</div>
      <div class="count" data-target="{{ total }}">0</div>
    </a>

    <a href="{% url 'liste_actifs_par_entite' %}" class="card-dashboard bg-green">
      <div class="icon">‚úÖ</div>
      <div class="label">Agents Actifs</div>
      <div class="count" data-target="{{ actifs }}">0</div>
    </a>

    <a href="{% url 'liste_retraites_pdf' %}" class="card-dashboard bg-yellow text-dark">
      <div class="icon">üë¥</div>
      <div class="label">Retrait√©s</div>
      <div class="count" data-target="{{ retraites }}">0</div>
    </a>

    <a href="{% url 'liste_decedes_pdf' %}" class="card-dashboard bg-red">
      <div class="icon">‚ö∞Ô∏è</div>
      <div class="label">Agents d√©c√©d√©s</div>
      <div class="count" data-target="{{ decedes }}">0</div>
    </a>

    <a href="{% url 'liste_agents_ayant_ete_licencies_pdf' %}" class="card-dashboard bg-darkgreen">
      <div class="icon">‚ùå</div>
      <div class="label">Agents ayant √©t√© licenci√©s</div>
      <div class="count" data-target="{{ agents_ayant_ete_licencies }}">0</div>
    </a>

    <a href="{% url 'liste_demissionnaires_pdf' %}" class="card-dashboard bg-teal">
      <div class="icon">üì§</div>
      <div class="label">D√©missionnaires</div>
      <div class="count" data-target="{{ demissionnaires }}">0</div>
    </a>

    <a href="{% url 'liste_detachement_pdf' %}" class="card-dashboard bg-purple">
      <div class="icon">üß≥</div>
      <div class="label">Agents en d√©tachement</div>
      <div class="count" data-target="{{ en_detachement }}">0</div>
    </a>

    <a href="{% url 'liste_agents_mis_en_disponibilite_pdf' %}" class="card-dashboard bg-indigo">
      <div class="icon">üìÇ</div>
      <div class="label">Agents mis en disponibilit√©</div>
      <div class="count" data-target="{{ en_disponibilite }}">0</div>
    </a>
  </div>

  <!-- Boutons -->
  <div style="width: 100%; text-align: center; margin-top: 25px;">
    <a href="{% url 'liste_employes' %}">
      <button class="btn btn-secondary">‚û° Acc√©der √† la liste des agents</button>
    </a>
    {% if is_admin_rh %}
    <a href="/admin/" style="margin-left: 10px;">
      <button class="btn btn-secondary">‚Ü©Ô∏è Retour √† l'Interface Admin</button>
    </a>
    {% endif %}
  </div>
</div>

<style>
.dashboard-grid {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 20px;
  margin-top: 30px;
}

.card-dashboard {
  width: 180px;
  height: 150px;
  padding: 18px;
  border-radius: 16px;
  text-align: center;
  font-weight: bold;
  color: white;
  text-decoration: none;
  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
  transition: transform 0.2s ease-in-out;
}

.card-dashboard:hover {
  transform: scale(1.05);
  cursor: pointer;
}

.card-dashboard .icon {
  font-size: 38px;
  margin-bottom: 5px;
}

.card-dashboard .label {
  font-size: 19px;
  font-weight: bold;
  margin-bottom: 3px;
}

.card-dashboard .count {
  font-size: 28px;
  font-weight: bold;
}

/* Couleurs */
.bg-blue { background-color: #007bff; }
.bg-green { background-color: #28a745; }
.bg-yellow { background-color: #ffc107; color: black !important; }
.bg-red { background-color: #dc3545; }
.bg-darkgreen { background-color: #228B22; }
.bg-teal { background-color: #17a2b8; }
.bg-purple { background-color: #6610f2; }
.bg-indigo { background-color: #6f42c1; }

.btn-secondary {
  background-color: #6c757d;
  color: white;
  border: none;
  padding: 10px 20px;
  border-radius: 8px;
  font-size: 16px;
}

.text-dark { color: black !important; }
</style>

<!-- Animation JS compteur -->
<script>
  document.addEventListener("DOMContentLoaded", () => {
    document.querySelectorAll(".count").forEach(counter => {
      const updateCount = () => {
        const target = +counter.getAttribute('data-target');
        const current = +counter.innerText;
        const increment = Math.ceil(target / 40);
        if (current < target) {
          counter.innerText = current + increment;
          setTimeout(updateCount, 20);
        } else {
          counter.innerText = target;
        }
      };
      updateCount();
    });
  });
</script>
{% endblock %}
