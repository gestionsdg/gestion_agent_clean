
{% extends 'base.html' %}

{% block content %}
<h2 style="text-align: center; font-size: 20px; text-decoration: underline; font-weight: bold; margin-bottom: 20px;">
  Liste des Employ√©s Actifs (CNSS)
</h2>

<!-- BOUTONS -->
<div class="actions">
  <a href="{% url 'dashboard' %}">
    <button class="btn-retour">‚¨Ö Retour au tableau de bord</button>
  </a>
  <button class="btn-imprimer" onclick="window.print()">üñ®Ô∏è Imprimer</button>
</div>

<!-- TABLEAU -->
<table style="width: 100%; border-collapse: collapse; font-size: 13px;">
  <thead>
    <tr style="background-color: #f0f0f0;">
      <th style="border: 1px solid #ccc; padding: 6px; text-align: center;">N¬∞</th>
      <th style="border: 1px solid #ccc; padding: 6px; text-align: center;">Nom</th>
      <th style="border: 1px solid #ccc; padding: 6px; text-align: center;">Matricule</th>
      <th style="border: 1px solid #ccc; padding: 6px; text-align: center;">Sexe</th>
      <th style="border: 1px solid #ccc; padding: 6px; text-align: center;">Grade actuel</th>
      <th style="border: 1px solid #ccc; padding: 6px; text-align: center;">Service</th>
      <th style="border: 1px solid #ccc; padding: 6px; text-align: center;">Fonction</th>
      <th style="border: 1px solid #ccc; padding: 6px; text-align: center;">Date affectation</th>
      <th style="border: 1px solid #ccc; padding: 6px; text-align: center;">Dur√©e affectation</th>
      <th style="border: 1px solid #ccc; padding: 6px; text-align: center;">Entit√©</th>
    </tr>
  </thead>
  <tbody>
    {% for i, emp in agents %}
    <tr>
      <td style="border: 1px solid #ccc; padding: 5px; text-align: center;">{{ i }}</td>
      <td style="border: 1px solid #ccc; padding: 5px;">{{ emp.nom|default:"-" }}</td>
      <td style="border: 1px solid #ccc; padding: 5px; text-align: center;">{{ emp.matricule|default:"-" }}</td>
      <td style="border: 1px solid #ccc; padding: 5px; text-align: center;">{{ emp.sexe|default:"-" }}</td>
      <td style="border: 1px solid #ccc; padding: 5px;">{{ emp.grade_actuel|default:"-" }}</td>
      <td style="border: 1px solid #ccc; padding: 5px;">{{ emp.service|default:"-" }}</td>
      <td style="border: 1px solid #ccc; padding: 5px;">{{ emp.fonction|default:"-" }}</td>
      <td style="border: 1px solid #ccc; padding: 5px; text-align: center;">{{ emp.date_affectation|date:"d/m/Y"|default:"-" }}</td>
      <td style="border: 1px solid #ccc; padding: 5px; text-align: center;">{{ emp.duree_affectation }}</td>
      <td style="border: 1px solid #ccc; padding: 5px;">{{ emp.entite|default:"-" }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<style>
  @media print {
    .actions {
      display: none;
    }
  }

  .btn-retour, .btn-imprimer {
    margin: 5px;
    padding: 10px 15px;
    font-size: 14px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
  }

  .btn-retour {
    background-color: #6c757d;
    color: white;
  }

  .btn-imprimer {
    background-color: #007bff;
    color: white;
  }
</style>
{% endblock %}
