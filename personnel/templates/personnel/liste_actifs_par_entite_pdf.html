<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Liste des agents actifs</title>
</head>
<body style="font-family: Arial, sans-serif; font-size: 14px;">

    <h2 style="text-align: center;"><u>Liste des agents actifs : {{ entite }}</u></h2>

    {% if cadres_direction %}
        <h3>Cadres de direction</h3>
        <table style="width: 100%; border-collapse: collapse; font-size: 13px;">
           <thead>
                <tr style="background-color: #e0e0e0;">
                    <th style="border: 1px solid #ccc; padding: 6px; text-align: center;">N°</th>
                    <th style="border: 1px solid #ccc; padding: 6px; text-align: center;">Nom</th>
                    <th style="border: 1px solid #ccc; padding: 6px; text-align: center;">Matricule</th>
                    <th style="border: 1px solid #ccc; padding: 6px; text-align: center;">Sexe</th>
                    <th style="border: 1px solid #ccc; padding: 6px; text-align: center;">Grade actuel</th>
                    <th style="border: 1px solid #ccc; padding: 6px; text-align: center;">Fonction</th>
                    <th style="border: 1px solid #ccc; padding: 6px; text-align: center;">Date affectation</th>
                    <th style="border: 1px solid #ccc; padding: 6px; text-align: center;">Durée affectation</th>
                </tr>
            </thead>

            <tbody>
                {% for ligne in lignes %}
                    <tr>
                        {% for val in ligne %}
                            {% if forloop.counter == 1 or forloop.counter == 3 or forloop.counter == 4 or forloop.counter == 6 or forloop.counter == 7 %}
                                <td style="border: 1px solid #ccc; padding: 5px; text-align: center;">
                            {% elif forloop.counter == 2 or forloop.counter == 5 %}
                                <td style="border: 1px solid #ccc; padding: 5px; text-align: left;">
                            {% elif forloop.counter == 8 %}
                                <td style="border: 1px solid #ccc; padding: 5px; text-align: center;">
                            {% else %}
                                <td style="border: 1px solid #ccc; padding: 5px;">
                            {% endif %}
                                {{ val|default:"-" }}
                            </td>
                        {% endfor %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% endif %}

    {% for service, cadres, lignes in donnees_groupes %}
    {% if lignes %}
        <h3 style="margin-top: 20px;">Service : {{ service }}</h3>
        <table style="width: 100%; border-collapse: collapse; font-size: 13px;">
            <thead>
                <tr style="background-color: #e0e0e0;">
                    {% for col in colonnes %}
                        <th style="border: 1px solid #ccc; padding: 6px; text-align: center;">{{ col }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for ligne in lignes %}
                    <tr>
                        {% for val in ligne %}
							{% if forloop.counter == 1 or forloop.counter == 3 or forloop.counter == 4 or forloop.counter == 7 or forloop.counter == 8 %}
								<td style="border: 1px solid #ccc; padding: 5px; text-align: center;">
							{% elif forloop.counter == 2 or forloop.counter == 5 or forloop.counter == 6 or forloop.counter == 9 %}
								<td style="border: 1px solid #ccc; padding: 5px; text-align: left;">
                            {% else %}
                                <td style="border: 1px solid #ccc; padding: 5px;">
                            {% endif %}
                                {{ val|default:"-" }}
                            </td>
                        {% endfor %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% endif %}
{% endfor %}

</body>
</html>
