{% extends 'base.html' %}
{% block title %}{{ titre }}{% endblock %}

{% block content %}
<h2 style="text-align: center; font-size: 20px; margin-bottom: 10px; text-decoration: underline; font-weight: bold;">
  {{ titre }}
</h2>

<table class="tbl">
  <thead>
    <tr>
      <th>N°</th>
      <th style="text-align:left;">Nom</th>
      <th>Matricule</th>
      <th>Sexe</th>
      <th>Date naissance</th>
      <th>Date retraite</th>
      <th>Âge départ</th>
      <th>Date engagement</th>
      <th>Carrière</th>
      <th style="text-align:left;">Entité</th>
    </tr>
  </thead>
  <tbody>
    {% for idx, emp in agents %}
      <tr>
        <td>{{ idx }}</td>
        <td class="left">{{ emp.nom|default:"-" }}</td>
        <td>{{ emp.matricule|default:"-" }}</td>
        <td>{{ emp.sexe|default:"-" }}</td>
        <td>{{ emp.date_naissance|date:"d/m/Y"|default:"-" }}</td>
        <td>{{ emp.date_statut|date:"d/m/Y"|default:"-" }}</td>
        <td>{{ emp.age_depart|default:"-" }}</td>
        <td>{{ emp.date_engagement|date:"d/m/Y"|default:"-" }}</td>
        <td>{{ emp.carriere|default:"-" }}</td>
        <td class="left">{{ emp.entite|default:"-" }}</td>
      </tr>
    {% endfor %}
  </tbody>
</table>

<div class="print-stamp-last">Document imprimé : le {% now "d/m/Y H:i" %}</div>

<style>
  .tbl { width:100%; border-collapse:collapse; font-size:12px; margin-top:8px; }
  .tbl th, .tbl td { border:1px solid #000; padding:6px; text-align:center; }
  .tbl th { background:#f2f2f2; }
  .tbl td.left { text-align:left; }
  thead { display: table-header-group; }
  tbody tr { page-break-inside: avoid; }

  .print-stamp-last { display:none; }

  @media print {
    /* Les navigateurs ignorent souvent les margin boxes.
       Cette partie ne garantit PAS le pied de page dernière page côté navigateur. */
    .print-stamp-last{
      display:block;
      text-align:right;
      font-size:11px; color:#555;
      margin-top:8px;
    }
  }
</style>
{% endblock %}
